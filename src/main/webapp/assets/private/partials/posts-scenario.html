<div class="container-fluid">
	
	<div class="row">
		<hr class="hrDivider">
	</div>	
		
	<div>
		<insert-post 
			character="scenario.currentCharacter" 
			posts="scenarioPost.posts" scenario="scenarioPost.scen" 
			has-character="scenario.hasCharacter" is-moderator ="scenario.isModerator">
		</insert-post>
	</div>
	
</div>


<!-- ELENCO POST -->
<div class="row">
	<div data-ng-repeat="s in scenarioPost.posts">


		<div data-ng-if="s.character" class="row">
			<div class="col-md-10 col-md-offset-1 box">
				<div class="row">
					<div class="pull-left col-md-8">
						<b class="pull-left"><a href="">{{s.character.name}}</a></b>
					</div>
					<div class="pull-right col-md-4">
						<label class="pull-right">{{scenarioPost.formatDate(s.historicalDate)}}</label>
					</div>
				</div>
				<div class="row rowPost">
					<div class="col-md-2">
						<img style="margin: 5px;"
							class="pull-left img-thumbnail imgPreviewL"
							data-ng-src="{{s.character.cover}}"
							data-err-src="assets/public/img/cesar.png"></img>
						<div class="pull-left box box-info">
							{{s.creationDate | date: scenarioPost.realDateFormat}} <br>
							{{s.user.firstname}} {{s.user.lastname}}
						</div>
					</div>

					<div class="col-md-10 postStatus">
						<div class="row">
							<div class="col-md-12">
								<label class="pull-left">{{s.text}}</label>
							</div>
							<div data-ng-repeat="image in s.imagesMetadata">
								<img class="imgPreviewXL" alt={{image.name}} data-ng-src="api/v1/media/{{image.id}}">
							</div>
							<div data-ng-repeat="file in s.filesMetadata">
								<p>{{file.originalName}}</p>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-10 col-md-offset-2">
					<div data-ng-show="s.tags.length>0" class="row">
						<div style="margin-left: 35px;" class="pull-left">
							<b>Con: </b><i><span data-ng-repeat="t in s.tags"> <a href="">{{t.firstname}}</a> </span></i>
						</div>	
					</div>
					<div data-ng-show="scenario.hasCharacter" class="row"
						style="margin-left: 25px; margin-top: 7px; margin-bottom: 7px;">
						<div data-ng-if="s.youLike"
							data-ng-click="scenarioPost.likePost(s)" title="Non mi piace più"
							class="tooltips glyphicon glyphicon-thumbs-up pull-left">Ti
							piace</div>
						<div data-ng-if="!s.youLike"
							data-ng-click="scenarioPost.likePost(s)" title="Mi piace!"
							class="tooltips glyphicon glyphicon-thumbs-up pull-left"></div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-10" style="text-align: center;">
						<div class="tabComment"
							data-ng-click="scenarioPost.switchCommentTab(true)">COMMENTA</div>
						<div class="tabComment pull-right"
							data-ng-click="scenarioPost.switchCommentTab(false)"
							style="margin-right: 5px;">DIETRO LE QUINTE</div>
					</div>
					<div class="col-md-2"></div>
					<div data-ng-if="scenarioPost.commentTab" class="col-md-10"
						style="text-align: center;">
						<div class="col-md-2">
							<img style="margin: 5px; margin-left: 10px;"
								class="pull-right img-thumbnail imgPreviewM"
								data-ng-src="api/v1/scenarios/{{scenarioPost.scen.id}}/characters/{{scenario.currentCharacter.id}}/cover"
								data-err-src="assets/public/img/cesar.png"></img>
						</div>
						<div class="col-md-10">
							<textarea data-ng-model="s.newComment" rows="2"
								style="margin: 5px;" class="col-md-12"
								placeholder="Inserisci un commento"></textarea>
							<div class="btn generalButton btn-sm pull-right"
								data-ng-click="scenarioPost.addCommentToPost(s)">COMMENTA</div>
						</div>
						<div class="row" style="margin-top: 20px; margin-bottom: 20px;">
						</div>
						<div data-ng-repeat="c in s.comments" class="row">
							<div class="col-md-2">
								<img style="margin: 5px; margin-left: 10px;"
									class="pull-right img-thumbnail imgPreviewM"
									data-ng-src="api/v1/scenarios/{{scenarioPost.scen.id}}/characters/{{c.character.id}}/cover"
									data-err-src="assets/public/img/cesar.png"></img>
							</div>
							<div class="col-md-10">
								<div style="margin: 5px;" class="col-md-10 pull-left">
									<p>
										<label>{{c.character.firstname}}</label>: {{c.text}}
									</p>
								</div>
								<div class="col-md-1">
									<p class="pull-right" style="font-size: x-small;">{{c.user.firstname}}
										{{c.user.lastname}}</p>
								</div>
							</div>
						</div>
					</div>
					<div data-ng-if="!scenarioPost.commentTab" class="col-md-10"
						style="text-align: center;">
						<div class="col-md-2">
							<img style="margin: 5px; margin-left: 10px;"
								class="pull-right img-thumbnail imgPreviewM"
								data-ng-src="api/v1/users/{{scenario.loggedUser.id}}/cover"
								data-err-src="assets/public/img/user_ico.png"></img>
						</div>
						<div class="col-md-10">
							<textarea data-ng-model="s.newMetaComment" rows="2"
								style="margin: 5px;" class="col-md-12"
								placeholder="Dai un suggerimento ai tuoi amici"></textarea>
							<div class="btn generalButton btn-sm pull-right"
								data-ng-click="scenarioPost.addMetaCommentToPost(s)">COMMENTA</div>
						</div>
						<div class="row" style="margin-top: 20px; margin-bottom: 20px;">
						</div>
						<div data-ng-repeat="c in s.metaComments" class="row">
							<div class="col-md-2">
								<img style="margin: 5px; margin-left: 10px;"
									class="pull-right img-thumbnail imgPreviewM"
									data-ng-src="api/v1/users/{{c.user.id}}/cover"
									data-err-src="assets/public/img/user_ico.png"></img>
							</div>
							<div class="col-md-10">
								<div style="margin: 5px;" class="col-md-10">

									<p class="pull-left">{{c.text}}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<!-- EVENTO -->
		<div data-ng-if="!s.character" class="row">
			<div class="col-md-10 col-md-offset-1 box">
				<div class="row">
					<div class="pull-left col-md-8">
						<b class="pull-left">NARRATORE</b>
					</div>
					<div class="pull-right col-md-4">
						<label class="pull-right">{{scenarioPost.formatDate(s.historicalDate)}}</label>
					</div>
				</div>
				<div class="row rowPost">
					<div class="col-md-2">
						<img style="margin: 5px;"
							class="pull-left img-thumbnail imgPreviewL"
							src="assets/public/img/bookImage.png"></img>
						<div class="pull-left box box-info">
							{{s.creationDate | date: scenarioPost.realDateFormat}} <br>
							{{s.user.firstname}} {{s.user.lastname}}
						</div>
					</div>

					<div class="col-md-10 postStatus">
						<div class="row"><p><b>TIPOLOGIA EVENTO: </b>{{s.type}}</p></div>
						<div class="row">
							<div class="col-md-12">
								<label class="pull-left">{{s.text}}</label>
							</div>
							<div data-ng-show="s.imageId">
								<img class="imgPreviewXL" data-ng-src="{{s.imageUrl}}">
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-10 col-md-offset-2">
					<div data-ng-show="s.tags.length>0" class="row">
						<div style="margin-left: 35px;" class="pull-left">
							<b>Con: </b><i><span data-ng-repeat="t in s.tags"> <a href="">{{t.firstname}}</a> </span></i>
						</div>	
					</div>
					<div data-ng-show="scenario.hasCharacter" class="row"
						style="margin-left: 25px; margin-top: 7px; margin-bottom: 7px;">
						<div data-ng-if="s.youLike"
							data-ng-click="scenarioPost.likePost(s)" title="Non mi piace più"
							class="tooltips glyphicon glyphicon-thumbs-up pull-left">Ti
							piace</div>
						<div data-ng-if="!s.youLike"
							data-ng-click="scenarioPost.likePost(s)" title="Mi piace!"
							class="tooltips glyphicon glyphicon-thumbs-up pull-left"></div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-10" style="text-align: center;">
						<div class="tabComment"
							data-ng-click="scenarioPost.switchCommentTab(true)">COMMENTA</div>
						<div class="tabComment pull-right"
							data-ng-click="scenarioPost.switchCommentTab(false)"
							style="margin-right: 5px;">DIETRO LE QUINTE</div>
					</div>
					<div class="col-md-2"></div>
					<div data-ng-if="scenarioPost.commentTab" class="col-md-10"
						style="text-align: center;">
						<div class="col-md-2">
							<img style="margin: 5px; margin-left: 10px;"
								class="pull-right img-thumbnail imgPreviewM"
								data-ng-src="api/v1/scenarios/{{scenarioPost.scen.id}}/characters/{{scenario.currentCharacter.id}}/cover"
								data-err-src="assets/public/img/cesar.png"></img>
						</div>
						<div class="col-md-10">
							<textarea data-ng-model="s.newComment" rows="2"
								style="margin: 5px;" class="col-md-12"
								placeholder="Inserisci un commento"></textarea>
							<div class="btn btn-primary btn-sm pull-right"
								data-ng-click="scenarioPost.addCommentToPost(s)">COMMENTA</div>
						</div>
						<div class="row" style="margin-top: 20px; margin-bottom: 20px;">
						</div>
						<div data-ng-repeat="c in s.comments" class="row">
							<div class="col-md-2">
								<img style="margin: 5px; margin-left: 10px;"
									class="pull-right img-thumbnail imgPreviewM"
									data-ng-src="api/v1/scenarios/{{scenarioPost.scen.id}}/characters/{{c.character.id}}/cover"
									data-err-src="assets/public/img/cesar.png"></img>
							</div>
							<div class="col-md-10">
								<div style="margin: 5px;" class="col-md-10">
									<p class="pull-left">{{c.text}}</p>
								</div>
								<div class="col-md-1">
									<p class="pull-right" style="font-size: x-small;">{{c.user.firstname}}
										{{c.user.lastname}}</p>
								</div>
							</div>
						</div>
					</div>
					<div data-ng-if="!scenarioPost.commentTab" class="col-md-10"
						style="text-align: center;">
						<div class="col-md-2">
							<img style="margin: 5px; margin-left: 10px;"
								class="pull-right img-thumbnail imgPreviewM"
								data-ng-src="api/v1/users/{{scenario.loggedUser.id}}/cover"
								data-err-src="assets/public/img/user_ico.png"></img>
						</div>
						<div class="col-md-10">
							<textarea data-ng-model="s.newMetaComment" rows="2"
								style="margin: 5px;" class="col-md-12"
								placeholder="Dai un suggerimento ai tuoi amici"></textarea>
							<div class="btn btn-primary btn-sm pull-right"
								data-ng-click="scenarioPost.addMetaCommentToPost(s)">COMMENTA</div>
						</div>
						<div class="row" style="margin-top: 20px; margin-bottom: 20px;">
						</div>
						<div data-ng-repeat="c in s.metaComments" class="row">
							<div class="col-md-2">
								<img style="margin: 5px; margin-left: 10px;"
									class="pull-right img-thumbnail imgPreviewM"
									data-ng-src="api/v1/users/{{c.user.id}}/cover"
									data-err-src="assets/public/img/user_ico.png"></img>
							</div>
							<div class="col-md-10">
								<div style="margin: 5px;" class="col-md-10">
									<p class="pull-left">{{c.text}}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


	</div>
</div>
</div>
<script id="initialize-bootstrap-switch">
	$("[name='my-checkbox']").bootstrapSwitch();

</script>